<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Welcome to your oauth code</title>
    <meta name="robots" content="none" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <div class="wrapper">
      <div class="content" role="main">
        <h1 class="title">Oauth2 access token</h1>
        <div class="instructions">
          <h2>Your access token</h2>
          <p>
            This is the Oauth2 access token generated by your provider.
            It's quite long, but should autmatically select and save it to your clipboard.
          </p>
          <input type="text" id="authcode" value="code-here" style="width:80%">
          <br /><span id="status">&nbsp;</span>
          <p>
            After getting the code, copy it into the app you used to generate it.
            It's quite long.
            Don't use this if you don't know what you're doing.
            Apps could use this to access your accounts and their data.
            This page is comparable to Google's "urn:ietf:wg:oauth:2.0:oob URI" redirect URI.
          </p>
          <p>
            Don't know what <a href="https://oauth.net/2/">Oauth2</a> is?
            <b>Then don't use this page.</b>
          </p>
        </div>
      </div>
    </div>
    <footer class="footer">
      <div class="links">
        <a href="https://johnmu.com/">johnmu.com</a> &middot;
        <a href="https://github.com/softplus/">github</a>
      </div>
    </footer>
    <script type="text/javascript">
      function getQueryVariable(variable) {
         var query = window.location.search.substring(1);
         var vars = query.split("&");
         for (var i=0;i<vars.length;i++) {
                 var pair = vars[i].split("=");
                 if(pair[0] == variable){return pair[1];}
         }
         return(false);
      }
      onload = (event) => {
        document.getElementById("authcode").onclick = function() {
            this.select();
            document.execCommand('copy');
            document.getElementById("status").innerHTML = "Copied to clipboard!";
        }
        const the_code = getQueryVariable("code");
        if (the_code) {
          document.getElementById("authcode").value = the_code;
        }
      };

    </script>
  </body>
</html>
